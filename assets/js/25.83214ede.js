(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{469:function(s,t,e){"use strict";e.r(t);var a=e(2),n=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"一、安装docker-centos系列安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装docker-centos系列安装"}},[s._v("#")]),s._v(" 一、安装docker (centos系列安装)")]),s._v(" "),t("h2",{attrs:{id:"_1-安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装docker"}},[s._v("#")]),s._v(" 1. 安装docker")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum update "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新yum源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" yum-utils "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装yum-utils")]),s._v("\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\n")])])]),t("h2",{attrs:{id:"_2-设置开机启动和启动docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-设置开机启动和启动docker"}},[s._v("#")]),s._v(" 2. 设置开机启动和启动docker")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置开机自启")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动docker")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" version "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" info "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看docker信息")]),s._v("\n")])])]),t("h2",{attrs:{id:"_3-配置docker加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置docker加速"}},[s._v("#")]),s._v(" 3. 配置docker加速")]),s._v(" "),t("p",[s._v("修改 /etc/docker/daemon.json 文件并添加上 registry-mirrors 键值")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://enxn60x4.mirror.aliyuncs.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hub-mirror.c.163.com/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://reg-mirror.qiniu.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h2",{attrs:{id:"_4-docker常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker常用命令"}},[s._v("#")]),s._v(" 4. docker常用命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已下载的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi 镜像名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除已下载的镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search 镜像\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从官方仓库（hub.docker.com）查找镜像")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull 镜像名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 标签名默认是 latest，代表最新版本。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mynginx nginx "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建容器并后台运行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出运行中的容器（运行中）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有的容器（运行、未运行）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 容器名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除停止的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" 容器名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除运行中的容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start 容器名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop 容器名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart 容器名称\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启容器")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行容器中的指令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" 容器名称 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器日志")]),s._v("\n")])])]),t("h1",{attrs:{id:"二、安装docker-compose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装docker-compose"}},[s._v("#")]),s._v(" 二、安装docker-compose")]),s._v(" "),t("h2",{attrs:{id:"_1-点击跳转下载-docker-compose-镜像文件-docker-compose-linux-x86-64-并上传到服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-点击跳转下载-docker-compose-镜像文件-docker-compose-linux-x86-64-并上传到服务器"}},[s._v("#")]),s._v(" 1. "),t("a",{attrs:{href:"https://github.com/docker/compose/releases/tag/v2.21.0/docker-compose-linux-x86_64",target:"_blank",rel:"noopener noreferrer"}},[s._v("点击跳转下载 docker-compose 镜像文件"),t("OutboundLink")],1),s._v(" "),t("code",[s._v("docker-compose-linux-x86_64")]),s._v(" 并上传到服务器")]),s._v(" "),t("h2",{attrs:{id:"_2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装"}},[s._v("#")]),s._v(" 2. 安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /cicd-deploy/docker-compose-linux-x86_64 /usr/local/bin/docker-compose "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把文件复制到 /usr/local/bin/docker-compose ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/bin/docker-compose "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 赋予执行权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\n")])])]),t("h1",{attrs:{id:"三、基于docker-compose-安装并使用jenkins-2-414-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、基于docker-compose-安装并使用jenkins-2-414-1"}},[s._v("#")]),s._v(" 三、基于docker-compose 安装并使用"),t("code",[s._v("jenkins@2.414.1")])]),s._v(" "),t("h2",{attrs:{id:"_1-创建jenkins目录编写-cicd-deploy-jenkins-docker-compose-yml文件-如没有jenkins目录则需创建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建jenkins目录编写-cicd-deploy-jenkins-docker-compose-yml文件-如没有jenkins目录则需创建"}},[s._v("#")]),s._v(" 1. 创建jenkins目录编写"),t("code",[s._v("/cicd-deploy/jenkins/docker-compose.yml")]),s._v("文件(如没有jenkins目录则需创建)")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("version: '3'\nservices:\n  jenkins:\n    container_name: jenkins\n    image: jenkins/jenkins:lts\n    restart: always\n    ports:\n      - 8080:8080\n      - 50000:50000\n    volumes:\n      - ./jenkins_home:/var/jenkins_home\n")])])]),t("h2",{attrs:{id:"_2-使用-docker-compose-启动-jenkins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-docker-compose-启动-jenkins"}},[s._v("#")]),s._v(" 2. 使用 "),t("code",[s._v("docker-compose")]),s._v(" 启动 Jenkins")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /cicd-deploy/jenkins/docker-compose.yml up "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])])]),t("h2",{attrs:{id:"_3、在终端中执行以下命令获取-jenkins-的初始管理员密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、在终端中执行以下命令获取-jenkins-的初始管理员密码"}},[s._v("#")]),s._v(" 3、在终端中执行以下命令获取 Jenkins 的初始管理员密码")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" jenkins "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /var/jenkins_home/secrets/initialAdminPassword\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 初始密码为:795586e82b1348cd86801357a1564d54")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 有的版本需要用docker-compose查看jenkins日志获取密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose logs jenkins | grep password")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如日志无法写入则需要赋予权限")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo chmod 777 /cicd-deploy/jenkins/jenkins_home")]),s._v("\n")])])]),t("h2",{attrs:{id:"_4-打开浏览器-输入http-ip-8080。您将会看到jenkins的设置页面-需要时间等待jenkins初始化-然后输入密码即可进入主页。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-打开浏览器-输入http-ip-8080。您将会看到jenkins的设置页面-需要时间等待jenkins初始化-然后输入密码即可进入主页。"}},[s._v("#")]),s._v(" 4. 打开浏览器，输入http://ip:8080。您将会看到Jenkins的设置页面（需要时间等待jenkins初始化）然后输入密码即可进入主页。")]),s._v(" "),t("h2",{attrs:{id:"_5-进入后需要安装插件-选择推荐插件-等待安装完成。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-进入后需要安装插件-选择推荐插件-等待安装完成。"}},[s._v("#")]),s._v(" 5. 进入后需要安装插件，选择推荐插件，等待安装完成。")]),s._v(" "),t("h2",{attrs:{id:"_6-安装插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-安装插件"}},[s._v("#")]),s._v(" 6. 安装插件")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Maven Integration")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("SonarQube Scanner for Jenkins")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("Publish Over SSH")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("Gitee Plugin")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("GitHub Plugin")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("GitLab Plugin")]),s._v(" "),t("br"),s._v(" "),t("code",[s._v("Generic Webhook Trigger")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E6%95%99%E7%A8%8B.png",alt:"安装插件教程"}})]),s._v(" "),t("h2",{attrs:{id:"_7-新建任务并配置相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-新建任务并配置相关"}},[s._v("#")]),s._v(" 7. 新建任务并配置相关")]),s._v(" "),t("p",[t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1%E6%95%99%E7%A8%8B1.png",alt:"新建任务教程1"}}),s._v(" "),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1%E6%95%99%E7%A8%8B2.png",alt:"新建任务教程2"}}),s._v(" "),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1%E6%95%99%E7%A8%8B3.png",alt:"新建任务教程3"}}),s._v(" "),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1%E6%95%99%E7%A8%8B4.png",alt:"新建任务教程4"}}),s._v(" "),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E6%96%B0%E5%BB%BA%E4%BB%BB%E5%8A%A1%E6%95%99%E7%A8%8B5.png",alt:"新建任务教程5"}}),s._v(" "),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E4%B8%ADgitee%E9%85%8D%E7%BD%AEwebhooks%E6%95%99%E7%A8%8B.png",alt:"gitee配置webhooks教程"}})]),s._v(" "),t("h2",{attrs:{id:"_8-配置部署后进行邮件通知"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-配置部署后进行邮件通知"}},[s._v("#")]),s._v(" 8. 配置部署后进行邮件通知")]),s._v(" "),t("ol",[t("li",[s._v("进入系统管理 -> 系统配置，找到位置 "),t("code",[s._v("Jenkins Location")]),s._v(" 进行配置\n"),t("img",{attrs:{src:"/blogs/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/Jenkins%E9%85%8D%E7%BD%AE%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5%E6%95%99%E7%A8%8B1.png",alt:"配置邮件通知教程1"}})])])])}),[],!1,null,null,null);t.default=n.exports}}]);